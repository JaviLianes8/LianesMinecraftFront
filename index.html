<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lianes8 Server</title>
    <link rel="icon" type="image/svg+xml" href="./assets/torch-favicon.svg" />
    <link rel="stylesheet" href="./styles/main.css" />
    <link rel="stylesheet" href="./styles/password-overlay.css" />
  </head>
  <body>
    <header aria-hidden="true"></header>
    <main>
      <section class="control-card" aria-labelledby="mainTitle">
        <div class="control-card__header">
          <h1 id="mainTitle" class="control-card__title">
            <button class="status-button status-undefined control-card__title-button" data-role="status-button" type="button" aria-live="polite" aria-disabled="true" disabled>
              Desconocido
            </button>
          </h1>
        </div>
        <div class="torch-container">
          <svg class="torch" data-role="torch" viewBox="0 0 64 128" role="img" aria-labelledby="torchTitle torchDesc">
            <title id="torchTitle">Antorcha de Minecraft</title>
            <desc id="torchDesc">Antorcha pixelada con llamas animadas</desc>
            <rect x="28" y="36" width="8" height="84" fill="#7a4e2a"></rect>
            <rect x="26" y="44" width="12" height="8" fill="#5f3c1f"></rect>
            <rect x="26" y="68" width="12" height="8" fill="#5f3c1f"></rect>
            <rect x="26" y="92" width="12" height="8" fill="#5f3c1f"></rect>
            <rect x="30" y="120" width="4" height="6" fill="#3a2616"></rect>
            <rect x="22" y="24" width="20" height="12" fill="#4f4f4f"></rect>
            <rect x="20" y="20" width="24" height="8" fill="#6a6a6a"></rect>
            <rect x="24" y="16" width="16" height="6" fill="#808080"></rect>
            <g class="flame" data-role="flame">
              <rect class="fl1" x="26" y="2" width="12" height="12" fill="#ff9c2a"></rect>
              <rect class="fl2" x="22" y="6" width="8" height="8" fill="#ff7a1a"></rect>
              <rect class="fl3" x="38" y="6" width="8" height="8" fill="#ff7a1a"></rect>
              <rect class="fl2" x="30" y="6" width="6" height="6" fill="#ffd966"></rect>
              <rect class="fl1" x="28" y="10" width="4" height="4" fill="#ffe69a"></rect>
              <rect class="fl3" x="34" y="10" width="4" height="4" fill="#ffe69a"></rect>
              <rect class="fl1" x="18" y="10" width="3" height="3" fill="#ffd966"></rect>
              <rect class="fl2" x="44" y="10" width="3" height="3" fill="#ffd966"></rect>
              <rect class="fl3" x="30" y="0" width="3" height="3" fill="#fff2c2"></rect>
            </g>
          </svg>
        </div>
        <div class="controls" aria-label="Controles del servidor">
          <button class="control-button control-button--help" type="button" data-role="install-help-button" aria-haspopup="dialog" aria-expanded="false" aria-controls="installModal">
            ¿Necesitas ayuda?
          </button>
          <button class="control-button control-button--start" data-role="start-button" type="button">Iniciar servidor</button>
          <button class="control-button control-button--stop" data-role="stop-button" type="button">Detener servidor</button>
        </div>
        <div class="downloads" aria-label="Descargas" data-role="downloads-section">
          <strong data-role="downloads-label">Descargas:</strong>
          <a href="http://lianes8server.duckdns.org:8000/api/mods/download" data-role="download-mods">Mods del cliente</a>
          <a href="http://lianes8server.duckdns.org:8000/api/neoforge/download" data-role="download-neoforge">NeoForge</a>
          <a href="https://www.minecraft.net/en-us/download" data-role="download-minecraft" rel="noopener noreferrer" target="_blank">Minecraft (Sitio oficial)</a>
          <a href="https://www.java.com/en/download/" data-role="download-java" rel="noopener noreferrer" target="_blank">Java Runtime (Sitio oficial)</a>
        </div>
        <div class="route-calculator" data-role="route-calculator">
          <div class="route-calculator__header">
            <h2 class="route-calculator__title">Calcular ruta y precio</h2>
            <p class="route-calculator__description">
              Introduce el origen y destino para estimar la duración y la tarifa del servicio.
            </p>
          </div>
          <form class="route-form" data-role="route-form">
            <div class="route-form__grid">
              <label for="routeOriginInput">Origen
                <input
                  id="routeOriginInput"
                  type="text"
                  name="origin"
                  placeholder="Ej. Gran Vía, Madrid"
                  autocomplete="street-address"
                  data-role="route-origin"
                  required
                />
              </label>
              <label for="routeDestinationInput">Destino
                <input
                  id="routeDestinationInput"
                  type="text"
                  name="destination"
                  placeholder="Ej. Getafe, Madrid"
                  autocomplete="street-address"
                  data-role="route-destination"
                  required
                />
              </label>
              <label for="routeTariffSelect">Tarifa
                <select id="routeTariffSelect" name="tariff" data-role="route-tariff"></select>
              </label>
            </div>
            <div class="route-form__actions">
              <label class="route-form__checkbox" for="routeScheduledInput">
                <input id="routeScheduledInput" type="checkbox" data-role="route-scheduled" />
                Recogida programada (+5&nbsp;€)
              </label>
              <button class="route-form__submit" type="submit" data-role="route-submit">Calcular ruta y precio</button>
            </div>
          </form>
          <p class="route-status" data-role="route-status" aria-live="polite"></p>
          <div class="route-result" data-role="route-result" hidden>
            <p class="route-result__meta">
              Origen: <span data-role="route-origin-label"></span> · Destino: <span data-role="route-destination-label"></span>
            </p>
            <p class="route-result__summary">
              Distancia real: <span data-role="route-distance-real"></span> · Facturable: <span data-role="route-distance-billable"></span> · Duración: <span data-role="route-duration"></span>
            </p>
            <p class="route-result__price">
              Precio estimado: <strong data-role="route-price"></strong>
            </p>
            <p class="route-result__meta">
              Tarifa aplicada: <span data-role="route-tariff-label"></span>
            </p>
            <p class="route-result__supplement" data-role="route-supplement-row" hidden>
              Suplemento programado: <span data-role="route-supplement"></span>
            </p>
            <p class="route-result__cache" data-role="route-cache-info"></p>
            <div class="route-instructions" data-role="route-instructions" hidden>
              <p class="route-instructions__title">Instrucciones de la ruta</p>
              <ol class="route-instructions__list" data-role="route-instructions-list"></ol>
            </div>
            <div class="route-error__actions">
              <a
                class="route-button"
                data-role="route-open-maps"
                href="#"
                target="_blank"
                rel="noopener noreferrer"
              >Abrir en Google Maps</a>
            </div>
          </div>
          <div class="route-error" data-role="route-error" hidden>
            <p data-role="route-error-message"></p>
            <div class="route-error__actions">
              <a
                class="route-button"
                data-role="route-error-open-maps"
                href="#"
                target="_blank"
                rel="noopener noreferrer"
              >Abrir en Google Maps</a>
              <button class="route-button route-button--secondary" type="button" data-role="route-retry">Intentar de nuevo</button>
            </div>
          </div>
        </div>
        <div id="installModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="installModalTitle" data-role="install-modal" hidden>
          <div class="modal__overlay" data-role="install-modal-overlay"></div>
          <div class="modal__content" role="document" data-role="install-modal-content">
            <button type="button" class="modal__close" aria-label="Cerrar ventana de instalación" data-role="install-modal-close">×</button>
            <h2 id="installModalTitle" data-role="install-modal-title">Lista de verificación de instalación</h2>
            <div class="modal__body" data-role="install-modal-body"></div>
          </div>
        </div>
        <div class="info-overlay" data-role="info-overlay" aria-hidden="true" hidden>
          <div class="info-overlay__backdrop"></div>
          <p class="info-panel" data-role="info-panel" role="status" aria-live="polite"></p>
        </div>
      </section>
    </main>
    <div class="password-overlay" data-role="password-overlay">
      <div class="password-overlay__backdrop" data-role="password-backdrop"></div>
      <div class="password-overlay__dialog" role="dialog" aria-modal="true" aria-labelledby="passwordDialogTitle" aria-describedby="passwordDialogDescription">
        <form class="password-overlay__form" data-role="password-form">
          <h2 id="passwordDialogTitle" data-role="password-title">Acceso seguro</h2>
          <p id="passwordDialogDescription" data-role="password-description">Introduce la contraseña de arranque para desbloquear el panel.</p>
          <label class="password-overlay__label" for="passwordInput" data-role="password-label">Contraseña</label>
          <input id="passwordInput" class="password-overlay__input" type="password" name="password" autocomplete="current-password" required data-role="password-input" />
          <p class="password-overlay__error" data-role="password-error" aria-live="assertive" hidden></p>
          <div class="password-overlay__actions">
            <button class="password-overlay__button password-overlay__button--primary" type="submit" data-role="password-submit">Continuar</button>
            <button class="password-overlay__button" type="button" data-role="password-cancel">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
    <footer data-role="footer">
      <span data-role="footer-text">Lianes8 Minecraft Server</span>
      <a
        href="https://github.com/JaviLianes8/LianesMinecraftFront"
        data-role="footer-github-link"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Repositorio de GitHub"
        title="Repositorio de GitHub"
      >
        <img src="img/github.png" alt="GitHub" class="footer__github-icon" />
      </a>
    </footer>
    <script src="./runtime-config.js"></script>
    <script type="module">
      import { createDashboardApp } from './scripts/app/dashboardApp.js';
      import { initialiseRouteCalculator } from './scripts/routing/initialiseRouteCalculator.js';
      const app = createDashboardApp();
      app.initialise().catch((error) => {
        console.error('Failed to initialise the dashboard', error);
      });
      initialiseRouteCalculator();
    </script>
  </body>
</html>
